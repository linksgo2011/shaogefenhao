(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{962:function(e,n,s){"use strict";s.r(n);var a=s(15),t=Object(a.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("class Post extends AppModel {\n\n    public function newest() {\n        $result = Cache::read('newest_posts', 'longterm');  //去拿缓存数据\n        if (!$result) {  //如果缓存没有数据，就从数据库中去那数据\n            $result = $this->find('all', array('order' => 'Post.updated DESC', 'limit' => 10));  //获取数据\n            Cache::write('newest_posts', $result, 'longterm');  //写入一个缓存\n        }\n        return $result;\n    }\n}\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br")])]),s("p",[e._v("我以前一直不知道缓存怎么使用，其实是原来公司他们更本没有把缓存这样用，简直是吧缓当成了文件存储。")]),e._v(" "),s("p",[e._v("上面的例子一目了然啊、")]),e._v(" "),s("p",[e._v("在cakePHP 中使用的方法为")]),e._v(" "),s("p",[e._v("cakephp支持配置几个配置方案和存储引擎，分别对文件存储和外部存储进行使用")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Cache::config(``'short'``, ``array``(``  ``'engine'` `=> ``'File'``,``  ``'duration'` `=> ``'+1 hours'``,``  ``'path'` `=> CACHE,``  ``'prefix'` `=> ``'cake_short_'``));` `// long``Cache::config(``'long'``, ``array``(``  ``'engine'` `=> ``'File'``,``  ``'duration'` `=> ``'+1 week'``,``  ``'probability'` `=> 100,``  ``'path'` `=> CACHE . ``'long'` `. DS,``));\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("p",[e._v("上面就是两种配置方案")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("CacheEngine::write($key, $value, $config = 'default')\nReturns:    boolean for success.\nWrite value for a key into cache, optional string $config specifies configuration name to write to.\n\nCacheEngine::read($key)\nReturns:    The cached value or false for failure.\nRead a key from the cache. Return false to indicate the entry has expired or does not exist.\n\nCacheEngine::delete($key)\nReturns:    Boolean true on success.\nDelete a key from the cache. Return false to indicate that the entry did not exist or could not be deleted.\n\nCacheEngine::clear($check)\nReturns:    Boolean true on success.\nDelete all keys from the cache. If $check is true, you should validate that each value is actually expired.\n\nCacheEngine::clearGroup($group)\nReturns:    Boolean true on success.\nDelete all keys from the cache belonging to the same group.\n\nCacheEngine::decrement($key, $offset = 1)\nReturns:    Boolean true on success.\nDecrement a number under the key and return decremented value\n\nCacheEngine::increment($key, $offset = 1)\nReturns:    Boolean true on success.\nIncrement a number under the key and return incremented value\n\nCacheEngine::gc()\nNot required, but used to do clean up when resources expire. FileEngine uses this to delete files containing expired content.\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br"),s("span",{staticClass:"line-number"},[e._v("6")]),s("br"),s("span",{staticClass:"line-number"},[e._v("7")]),s("br"),s("span",{staticClass:"line-number"},[e._v("8")]),s("br"),s("span",{staticClass:"line-number"},[e._v("9")]),s("br"),s("span",{staticClass:"line-number"},[e._v("10")]),s("br"),s("span",{staticClass:"line-number"},[e._v("11")]),s("br"),s("span",{staticClass:"line-number"},[e._v("12")]),s("br"),s("span",{staticClass:"line-number"},[e._v("13")]),s("br"),s("span",{staticClass:"line-number"},[e._v("14")]),s("br"),s("span",{staticClass:"line-number"},[e._v("15")]),s("br"),s("span",{staticClass:"line-number"},[e._v("16")]),s("br"),s("span",{staticClass:"line-number"},[e._v("17")]),s("br"),s("span",{staticClass:"line-number"},[e._v("18")]),s("br"),s("span",{staticClass:"line-number"},[e._v("19")]),s("br"),s("span",{staticClass:"line-number"},[e._v("20")]),s("br"),s("span",{staticClass:"line-number"},[e._v("21")]),s("br"),s("span",{staticClass:"line-number"},[e._v("22")]),s("br"),s("span",{staticClass:"line-number"},[e._v("23")]),s("br"),s("span",{staticClass:"line-number"},[e._v("24")]),s("br"),s("span",{staticClass:"line-number"},[e._v("25")]),s("br"),s("span",{staticClass:"line-number"},[e._v("26")]),s("br"),s("span",{staticClass:"line-number"},[e._v("27")]),s("br"),s("span",{staticClass:"line-number"},[e._v("28")]),s("br"),s("span",{staticClass:"line-number"},[e._v("29")]),s("br"),s("span",{staticClass:"line-number"},[e._v("30")]),s("br")])]),s("p",[e._v("这里的存储引擎，可以自己修改，使用的时候就使用自己的存储引擎，如果没有使用基类cache类就可以啊")]),e._v(" "),s("p",[e._v("配置一个组")]),e._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Cache::config('site_home', array(\n    'engine' => 'Redis', //redis服务器\n    'duration' => '+999 days',  //时间\n    'groups' => array('comment', 'post')  //组模型\n));\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br"),s("span",{staticClass:"line-number"},[e._v("2")]),s("br"),s("span",{staticClass:"line-number"},[e._v("3")]),s("br"),s("span",{staticClass:"line-number"},[e._v("4")]),s("br"),s("span",{staticClass:"line-number"},[e._v("5")]),s("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);