(window.webpackJsonp=window.webpackJsonp||[]).push([[298],{1114:function(n,t,e){"use strict";e.r(t);var s=e(15),a=Object(s.a)({},(function(){var n=this,t=n.$createElement,e=n._self._c||t;return e("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[e("h1",{attrs:{id:"什么是-nginx"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#什么是-nginx"}},[n._v("#")]),n._v(" 什么是 Nginx")]),n._v(" "),e("p",[n._v("Nginx是一个优秀的web服务器，同时也可以用作负载均衡和反向代理")]),n._v(" "),e("h1",{attrs:{id:"安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装"}},[n._v("#")]),n._v(" 安装")]),n._v(" "),e("p",[n._v("在Ubuntu的环境下，安装Nginx")]),n._v(" "),e("blockquote",[e("p",[n._v("apt-get install nginx")])]),n._v(" "),e("h2",{attrs:{id:"常用命令"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#常用命令"}},[n._v("#")]),n._v(" 常用命令")]),n._v(" "),e("p",[n._v("配置修改后不停服重载")]),n._v(" "),e("blockquote",[e("p",[n._v("service nginx reload")])]),n._v(" "),e("p",[n._v("停服重启")]),n._v(" "),e("blockquote",[e("p",[n._v("service nginx start")])]),n._v(" "),e("h2",{attrs:{id:"配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#配置"}},[n._v("#")]),n._v(" 配置")]),n._v(" "),e("p",[n._v("Nginx的配置文件位于")]),n._v(" "),e("p",[e("code",[n._v("/etc/nginx")])]),n._v(" "),e("p",[n._v("配置文件入口为 nginx.conf，其中定义了全局的配置文件，包括日志位置、gzip、邮件以及加载站点的等配置。")]),n._v(" "),e("p",[n._v("我们常用的站点信息配置在：")]),n._v(" "),e("p",[n._v("/etc/nginx/sites-enabled/*;")]),n._v(" "),e("h3",{attrs:{id:"一个默认的配置文件"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#一个默认的配置文件"}},[n._v("#")]),n._v(" 一个默认的配置文件")]),n._v(" "),e("p",[n._v("``\nserver {\nlisten 80 default_server;\nlisten [::]:80 default_server ipv6only=on;")]),n._v(" "),e("div",{staticClass:"language- extra-class"},[e("pre",[e("code",[n._v("# 资源根目录\nroot /var/www;\n\n# 主页\nindex index.html index.htm index.php ;\n\n# Make site accessible from http://localhost/\nserver_name localhost;\n\nlocation / {\n\t# First attempt to serve request as file, then\n\t# as directory, then fall back to displaying a 404.\n\ttry_files $uri $uri/ =404;\n\t# Uncomment to enable naxsi on this location\n\t# include /etc/nginx/naxsi.rules\n}\n\n# 配置反向代理 例如 host/sub-path -> http://127.0.0.1:8080; \n# Only for nginx-naxsi used with nginx-naxsi-ui : process denied requests\n#location /RequestDenied {\n#\tproxy_pass http://127.0.0.1:8080;    \n#}\n\n#error_page 404 /404.html;\n\n# redirect server error pages to the static page /50x.html\n#\n#error_page 500 502 503 504 /50x.html;\n#location = /50x.html {\n#\troot /usr/share/nginx/html;\n#}\n\n# 开启PHP 解析\n# pass the PHP scripts to FastCGI server listening on 127.0.0.1:9000\n#\nlocation ~ \\.php$ {\n\tfastcgi_split_path_info ^(.+\\.php)(/.+)$;\n\t# NOTE: You should have \"cgi.fix_pathinfo = 0;\" in php.ini\n\n\t# With php5-cgi alone:\n\tfastcgi_pass 127.0.0.1:9000;\n\t# With php5-fpm:\n\tfastcgi_pass unix:/var/run/php5-fpm.sock;\n\tfastcgi_index index.php;\n\tinclude fastcgi_params;\n}\n\n# deny access to .htaccess files, if Apache's document root\n# concurs with nginx's one\n#\n#location ~ /\\.ht {\n#\tdeny all;\n#}\n")])])]),e("p",[n._v("}")]),n._v(" "),e("p",[n._v("``")]),n._v(" "),e("h3",{attrs:{id:"nginx-解析php的原理"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-解析php的原理"}},[n._v("#")]),n._v(" Nginx 解析PHP的原理")]),n._v(" "),e("p",[n._v("Nginx发送请求到php-fpm进程，然后php-fpm解析后返回给Nginx，即HTTP协议处理为Nginx完成，php-fpm 作为后台服务解析PHP页面")]),n._v(" "),e("h3",{attrs:{id:"nginx-增加虚拟主机方法"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#nginx-增加虚拟主机方法"}},[n._v("#")]),n._v(" Nginx 增加虚拟主机方法")]),n._v(" "),e("blockquote",[e("p",[n._v("mv default v-host")])]),n._v(" "),e("blockquote",[e("p",[n._v("vim v-host")])]),n._v(" "),e("p",[n._v("然后修改 v-host 文件中server_name为站点域名，讲该域名DNS指向本机即可")]),n._v(" "),e("p",[n._v("然后重在或者重启Nginx服务器")]),n._v(" "),e("blockquote",[e("p",[n._v("service nginx restart")])]),n._v(" "),e("p",[n._v("查看服务器状态")]),n._v(" "),e("blockquote",[e("p",[n._v("service nginx status")])]),n._v(" "),e("p",[n._v("如果服务器重启有误或者无效，可以在nginx.info 中找到日志文件查看并修改。")])])}),[],!1,null,null,null);t.default=a.exports}}]);