(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{507:function(A,e){A.exports="data:image/png;base64,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"},508:function(A,e,v){A.exports=v.p+"assets/img/image-20210519085340362.6bd73d99.png"},509:function(A,e,v){A.exports=v.p+"assets/img/image-20210523171440118.6c1ee4a4.png"},874:function(A,e,v){"use strict";v.r(e);var t=v(15),P=Object(t.a)({},(function(){var A=this,e=A.$createElement,t=A._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":A.$parent.slotKey}},[t("p",[A._v("多对多关系是软件建模中比较的麻烦的场景，如果梳理不清楚对软件架构伤害很大。在不久前的一个项目中，十足的体验了一次多对多关系带来的痛苦。")]),A._v(" "),t("p",[A._v("我们的项目有是一种多空间模型，也就是用户可以处于不同的空间，在不同的空间中可以访问空间中的资源。一个空间可以拥有多个用户，用户可以出现在多个空间中。看起来和编程老师在数据库课程中的多对多关系没有区别。")]),A._v(" "),t("p",[t("img",{attrs:{src:v(507),alt:"image-20210519085032849"}})]),A._v(" "),t("p",[A._v("对于数据库来说，多对多关系需要一个中间表，于是团队对数据建模“规范”的把中间表起名为 “workspace_user_relation”，得到的数据库 E-R 模型如下。")]),A._v(" "),t("p",[t("img",{attrs:{src:v(508),alt:"image-20210519085340362"}})]),A._v(" "),t("p",[A._v("团队使用了 JPA 的 @ManyToMany 注解，导致 workspace 和 user 两个对象无时不刻在一起了。另外，通过 user 可以操作 workspace，通过 workspace 也可以获得 user。")]),A._v(" "),t("p",[A._v("这种设计，不仅在技术上实现困难，对业务的支持也不足。")]),A._v(" "),t("ol",[t("li",[A._v("用户加入到空间中具有权限，通过这种方式比较难管理。")]),A._v(" "),t("li",[A._v("空间管理员并没有对用户的修改权利，只有对用户加入、退出、访问空间资源的权利，这种设计诱导了业务提出不合理的需求。比如空间管理员对用户的禁用，其实只是对用户参与到空间中的行为禁用，而非对用户禁用。")]),A._v(" "),t("li",[A._v("关系表中的创建时间的含义是用户加入空间的时间，使用中间表语义不明显。")])]),A._v(" "),t("h2",{attrs:{id:"换个思路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#换个思路"}},[A._v("#")]),A._v(" 换个思路")]),A._v(" "),t("p",[A._v("在很多编程指南和规范中，都有写明不允许使用多对多关系。在一些框架中，虽然实现了多对多关系，但是往往不推荐使用。")]),A._v(" "),t("p",[A._v('因为我们在开始学习编程的阶段中，接受了数据库的关系理论。数据库关系理论是 1969 被英国计算机科学家 Edgar Frank "Ted" Codd 首次提出。关系数据库理论继承了集合论的的思想，在处理数据上有独特优势，被广泛使用。关系数据库理论可以做到降低冗余，提高一致性的能力。')]),A._v(" "),t("p",[A._v("关系模型被用来存储数据、处理数据非常好用。但是，面向对象作为一种流行的编程模型，它是用来模拟现实业务的。面向对象构想的信息结构是树形，而关系模型是集合。")]),A._v(" "),t("p",[A._v("它们有一个天然的鸿沟，就是这两种结构如何转化的问题，因此出现了大量 ORM（对象关系映射） 软件来试图解决这个问题。数据库中的普通关系（一对一、一对多）可以使用面向对象中的 “组合” 来映射，但是多对多关系却极难被处理，这也是一些框架不建议使用的原因，但往往难以说明其中的道理。")]),A._v(" "),t("p",[A._v("其中的道理是什么呢？因为，关系模型中的多对多“关系”，映射到面向对象在本质是一个“隐藏的模型”。")]),A._v(" "),t("p",[A._v("我们用认识论中的主体-客体思维来看待这个问题，主体-客体可以让认识问题变得更深入。主体是有认识能力和实践能力的人，或者，是在社会实践中认识世界、改造世界的人。客体是实践和认识活动所指向的对象，是存在于主体之外的客观事物。在业务系统中，我们可以把 Controller、Service 这类带有行为能力的对象看做拟人化的主体，而 Entity、Model 看做客体。")]),A._v(" "),t("p",[A._v("回到上面的例子，对于工作空间、用户而言，当把用户加入工作空间的时候。我们发生三步行为：")]),A._v(" "),t("ol",[t("li",[A._v("使用了用户信息、工作空间的信息，这一步用户、工作空间都是被感知的客体。")]),A._v(" "),t("li",[A._v("创建了一个关系“工作空间-用户”，这一步“工作空间-用户”是客体。")]),A._v(" "),t("li",[A._v("把这个关系加入到工作空间，扩充了工作空间的信息，这一步工作空间是客体。")])]),A._v(" "),t("p",[A._v("问题的关键是我们往往没有找到一个好的名词来描述“工作空间-用户”这个概念，一旦这个概念被明确下来，我们的模型就清晰了，多对多关系就不存在了。")]),A._v(" "),t("p",[A._v("举例来说，我么可以给“工作空间-用户”找到如下的名字：")]),A._v(" "),t("ol",[t("li",[A._v("空间成员")]),A._v(" "),t("li",[A._v("参与者")]),A._v(" "),t("li",[A._v("空间用户")])]),A._v(" "),t("p",[A._v("真真实的例子中，我们使用了空间成员来作为这个隐藏模型的名字，因此空间和用户的关系被拆解为 “空间拥有多个成员” 和 “成员可以引用用户” 两个关系。")]),A._v(" "),t("h2",{attrs:{id:"更多案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#更多案例"}},[A._v("#")]),A._v(" 更多案例")]),A._v(" "),t("p",[A._v("大部分的多对多关系都可以通过这种方法消除，不过，除了起名字这个难题外，还有另一个问题。")]),A._v(" "),t("p",[A._v("多出来的这个隐藏模型和谁走？我们使用一个例子来说明这个问题。")]),A._v(" "),t("p",[A._v("在很多系统中，我们都需要使用 “标签”，而标签和特定的资源都是多对多关系。明白上面说的逻辑后，我们把标签存在于某个资源中的关系叫做 “标签项”。但是，如果同时有多个资源都需要使用便签，标签项跟谁走呢？")]),A._v(" "),t("p",[A._v("如果所有类型的标签都跟着标签走的话，可以做出一种通用的标签系统。其结果类似于搜索系统了，通过标签系统处理所有的业务。这样设计会使聚合搜索带来便利，但是标签在具体业务中的使用变的困难。")]),A._v(" "),t("p",[A._v("如果标签跟随具体的业务走，那么隐藏的中间模型就是具体的业务中的一个概念，比如文章专题中的标签、文章中的标签。通过这样的处理，可以让系统解耦良好。不过，代价是聚合搜索能力需要额外的技术来实现。")]),A._v(" "),t("p",[t("img",{attrs:{src:v(509),alt:"image-20210523171440118"}})]),A._v(" "),t("p",[A._v("这个例子充分说明了模型的建立需要为业务服务，业务人员往往需要明确其业务重心，并做出一些权衡和取舍才能设计出合适的模型。")]),A._v(" "),t("h2",{attrs:{id:"参考资料"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#参考资料"}},[A._v("#")]),A._v(" 参考资料")]),A._v(" "),t("ul",[t("li",[A._v("Mapping objects to relational databases What you need to know and why https://fi.ort.edu.uy/innovaportal/file/2032/1/mappingobjectstorelationaldatabases.pdf")]),A._v(" "),t("li",[A._v("Many-to-many (data model) https://en.wikipedia.org/wiki/Many-to-many_(data_model)")]),A._v(" "),t("li",[A._v("Subject–object–verb https://en.wikipedia.org/wiki/Subject%E2%80%93object%E2%80%93verb")])])])}),[],!1,null,null,null);e.default=P.exports}}]);